{"ast":null,"code":"import _classCallCheck from \"D:/STREAMING_SITE/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"D:/STREAMING_SITE/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\n\n/*\n * Copyright (C) 2016 Bilibili. All Rights Reserved.\n *\n * @author zheng qian <xqq@xqq.im>\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport IOController from '../io/io-controller.js';\nimport { createDefaultConfig } from '../config.js';\n\nvar Features = /*#__PURE__*/function () {\n  function Features() {\n    _classCallCheck(this, Features);\n  }\n\n  _createClass(Features, null, [{\n    key: \"supportMSEH264Playback\",\n    value: function supportMSEH264Playback() {\n      return window.MediaSource && window.MediaSource.isTypeSupported('video/mp4; codecs=\"avc1.42E01E,mp4a.40.2\"');\n    }\n  }, {\n    key: \"supportNetworkStreamIO\",\n    value: function supportNetworkStreamIO() {\n      var ioctl = new IOController({}, createDefaultConfig());\n      var loaderType = ioctl.loaderType;\n      ioctl.destroy();\n      return loaderType == 'fetch-stream-loader' || loaderType == 'xhr-moz-chunked-loader';\n    }\n  }, {\n    key: \"getNetworkLoaderTypeName\",\n    value: function getNetworkLoaderTypeName() {\n      var ioctl = new IOController({}, createDefaultConfig());\n      var loaderType = ioctl.loaderType;\n      ioctl.destroy();\n      return loaderType;\n    }\n  }, {\n    key: \"supportNativeMediaPlayback\",\n    value: function supportNativeMediaPlayback(mimeType) {\n      if (Features.videoElement == undefined) {\n        Features.videoElement = window.document.createElement('video');\n      }\n\n      var canPlay = Features.videoElement.canPlayType(mimeType);\n      return canPlay === 'probably' || canPlay == 'maybe';\n    }\n  }, {\n    key: \"getFeatureList\",\n    value: function getFeatureList() {\n      var features = {\n        mseFlvPlayback: false,\n        mseLiveFlvPlayback: false,\n        networkStreamIO: false,\n        networkLoaderName: '',\n        nativeMP4H264Playback: false,\n        nativeWebmVP8Playback: false,\n        nativeWebmVP9Playback: false\n      };\n      features.mseFlvPlayback = Features.supportMSEH264Playback();\n      features.networkStreamIO = Features.supportNetworkStreamIO();\n      features.networkLoaderName = Features.getNetworkLoaderTypeName();\n      features.mseLiveFlvPlayback = features.mseFlvPlayback && features.networkStreamIO;\n      features.nativeMP4H264Playback = Features.supportNativeMediaPlayback('video/mp4; codecs=\"avc1.42001E, mp4a.40.2\"');\n      features.nativeWebmVP8Playback = Features.supportNativeMediaPlayback('video/webm; codecs=\"vp8.0, vorbis\"');\n      features.nativeWebmVP9Playback = Features.supportNativeMediaPlayback('video/webm; codecs=\"vp9\"');\n      return features;\n    }\n  }]);\n\n  return Features;\n}();\n\nexport default Features;","map":{"version":3,"sources":["D:/STREAMING_SITE/client/node_modules/flv.js/src/core/features.js"],"names":["IOController","createDefaultConfig","Features","window","MediaSource","isTypeSupported","ioctl","loaderType","destroy","mimeType","videoElement","undefined","document","createElement","canPlay","canPlayType","features","mseFlvPlayback","mseLiveFlvPlayback","networkStreamIO","networkLoaderName","nativeMP4H264Playback","nativeWebmVP8Playback","nativeWebmVP9Playback","supportMSEH264Playback","supportNetworkStreamIO","getNetworkLoaderTypeName","supportNativeMediaPlayback"],"mappings":";;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA,OAAOA,YAAP,MAAyB,wBAAzB;AACA,SAAQC,mBAAR,QAAkC,cAAlC;;IAEMC,Q;;;;;;;WAEF,kCAAgC;AAC5B,aAAOC,MAAM,CAACC,WAAP,IACAD,MAAM,CAACC,WAAP,CAAmBC,eAAnB,CAAmC,2CAAnC,CADP;AAEH;;;WAED,kCAAgC;AAC5B,UAAIC,KAAK,GAAG,IAAIN,YAAJ,CAAiB,EAAjB,EAAqBC,mBAAmB,EAAxC,CAAZ;AACA,UAAIM,UAAU,GAAGD,KAAK,CAACC,UAAvB;AACAD,MAAAA,KAAK,CAACE,OAAN;AACA,aAAOD,UAAU,IAAI,qBAAd,IAAuCA,UAAU,IAAI,wBAA5D;AACH;;;WAED,oCAAkC;AAC9B,UAAID,KAAK,GAAG,IAAIN,YAAJ,CAAiB,EAAjB,EAAqBC,mBAAmB,EAAxC,CAAZ;AACA,UAAIM,UAAU,GAAGD,KAAK,CAACC,UAAvB;AACAD,MAAAA,KAAK,CAACE,OAAN;AACA,aAAOD,UAAP;AACH;;;WAED,oCAAkCE,QAAlC,EAA4C;AACxC,UAAIP,QAAQ,CAACQ,YAAT,IAAyBC,SAA7B,EAAwC;AACpCT,QAAAA,QAAQ,CAACQ,YAAT,GAAwBP,MAAM,CAACS,QAAP,CAAgBC,aAAhB,CAA8B,OAA9B,CAAxB;AACH;;AACD,UAAIC,OAAO,GAAGZ,QAAQ,CAACQ,YAAT,CAAsBK,WAAtB,CAAkCN,QAAlC,CAAd;AACA,aAAOK,OAAO,KAAK,UAAZ,IAA0BA,OAAO,IAAI,OAA5C;AACH;;;WAED,0BAAwB;AACpB,UAAIE,QAAQ,GAAG;AACXC,QAAAA,cAAc,EAAE,KADL;AAEXC,QAAAA,kBAAkB,EAAE,KAFT;AAGXC,QAAAA,eAAe,EAAE,KAHN;AAIXC,QAAAA,iBAAiB,EAAE,EAJR;AAKXC,QAAAA,qBAAqB,EAAE,KALZ;AAMXC,QAAAA,qBAAqB,EAAE,KANZ;AAOXC,QAAAA,qBAAqB,EAAE;AAPZ,OAAf;AAUAP,MAAAA,QAAQ,CAACC,cAAT,GAA0Bf,QAAQ,CAACsB,sBAAT,EAA1B;AACAR,MAAAA,QAAQ,CAACG,eAAT,GAA2BjB,QAAQ,CAACuB,sBAAT,EAA3B;AACAT,MAAAA,QAAQ,CAACI,iBAAT,GAA6BlB,QAAQ,CAACwB,wBAAT,EAA7B;AACAV,MAAAA,QAAQ,CAACE,kBAAT,GAA8BF,QAAQ,CAACC,cAAT,IAA2BD,QAAQ,CAACG,eAAlE;AACAH,MAAAA,QAAQ,CAACK,qBAAT,GAAiCnB,QAAQ,CAACyB,0BAAT,CAAoC,4CAApC,CAAjC;AACAX,MAAAA,QAAQ,CAACM,qBAAT,GAAiCpB,QAAQ,CAACyB,0BAAT,CAAoC,oCAApC,CAAjC;AACAX,MAAAA,QAAQ,CAACO,qBAAT,GAAiCrB,QAAQ,CAACyB,0BAAT,CAAoC,0BAApC,CAAjC;AAEA,aAAOX,QAAP;AACH;;;;;;AAIL,eAAed,QAAf","sourcesContent":["/*\n * Copyright (C) 2016 Bilibili. All Rights Reserved.\n *\n * @author zheng qian <xqq@xqq.im>\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport IOController from '../io/io-controller.js';\nimport {createDefaultConfig} from '../config.js';\n\nclass Features {\n\n    static supportMSEH264Playback() {\n        return window.MediaSource &&\n               window.MediaSource.isTypeSupported('video/mp4; codecs=\"avc1.42E01E,mp4a.40.2\"');\n    }\n\n    static supportNetworkStreamIO() {\n        let ioctl = new IOController({}, createDefaultConfig());\n        let loaderType = ioctl.loaderType;\n        ioctl.destroy();\n        return loaderType == 'fetch-stream-loader' || loaderType == 'xhr-moz-chunked-loader';\n    }\n\n    static getNetworkLoaderTypeName() {\n        let ioctl = new IOController({}, createDefaultConfig());\n        let loaderType = ioctl.loaderType;\n        ioctl.destroy();\n        return loaderType;\n    }\n\n    static supportNativeMediaPlayback(mimeType) {\n        if (Features.videoElement == undefined) {\n            Features.videoElement = window.document.createElement('video');\n        }\n        let canPlay = Features.videoElement.canPlayType(mimeType);\n        return canPlay === 'probably' || canPlay == 'maybe';\n    }\n\n    static getFeatureList() {\n        let features = {\n            mseFlvPlayback: false,\n            mseLiveFlvPlayback: false,\n            networkStreamIO: false,\n            networkLoaderName: '',\n            nativeMP4H264Playback: false,\n            nativeWebmVP8Playback: false,\n            nativeWebmVP9Playback: false\n        };\n\n        features.mseFlvPlayback = Features.supportMSEH264Playback();\n        features.networkStreamIO = Features.supportNetworkStreamIO();\n        features.networkLoaderName = Features.getNetworkLoaderTypeName();\n        features.mseLiveFlvPlayback = features.mseFlvPlayback && features.networkStreamIO;\n        features.nativeMP4H264Playback = Features.supportNativeMediaPlayback('video/mp4; codecs=\"avc1.42001E, mp4a.40.2\"');\n        features.nativeWebmVP8Playback = Features.supportNativeMediaPlayback('video/webm; codecs=\"vp8.0, vorbis\"');\n        features.nativeWebmVP9Playback = Features.supportNativeMediaPlayback('video/webm; codecs=\"vp9\"');\n\n        return features;\n    }\n\n}\n\nexport default Features;"]},"metadata":{},"sourceType":"module"}
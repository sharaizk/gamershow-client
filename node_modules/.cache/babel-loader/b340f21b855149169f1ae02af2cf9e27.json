{"ast":null,"code":"import _classCallCheck from \"D:/STREAMING_SITE/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"D:/STREAMING_SITE/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\n\n/*\n * Copyright (C) 2016 Bilibili. All Rights Reserved.\n *\n * @author zheng qian <xqq@xqq.im>\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { NotImplementedException } from '../utils/exception.js';\nexport var LoaderStatus = {\n  kIdle: 0,\n  kConnecting: 1,\n  kBuffering: 2,\n  kError: 3,\n  kComplete: 4\n};\nexport var LoaderErrors = {\n  OK: 'OK',\n  EXCEPTION: 'Exception',\n  HTTP_STATUS_CODE_INVALID: 'HttpStatusCodeInvalid',\n  CONNECTING_TIMEOUT: 'ConnectingTimeout',\n  EARLY_EOF: 'EarlyEof',\n  UNRECOVERABLE_EARLY_EOF: 'UnrecoverableEarlyEof'\n};\n/* Loader has callbacks which have following prototypes:\n *     function onContentLengthKnown(contentLength: number): void\n *     function onURLRedirect(url: string): void\n *     function onDataArrival(chunk: ArrayBuffer, byteStart: number, receivedLength: number): void\n *     function onError(errorType: number, errorInfo: {code: number, msg: string}): void\n *     function onComplete(rangeFrom: number, rangeTo: number): void\n */\n\nexport var BaseLoader = /*#__PURE__*/function () {\n  function BaseLoader(typeName) {\n    _classCallCheck(this, BaseLoader);\n\n    this._type = typeName || 'undefined';\n    this._status = LoaderStatus.kIdle;\n    this._needStash = false; // callbacks\n\n    this._onContentLengthKnown = null;\n    this._onURLRedirect = null;\n    this._onDataArrival = null;\n    this._onError = null;\n    this._onComplete = null;\n  }\n\n  _createClass(BaseLoader, [{\n    key: \"destroy\",\n    value: function destroy() {\n      this._status = LoaderStatus.kIdle;\n      this._onContentLengthKnown = null;\n      this._onURLRedirect = null;\n      this._onDataArrival = null;\n      this._onError = null;\n      this._onComplete = null;\n    }\n  }, {\n    key: \"isWorking\",\n    value: function isWorking() {\n      return this._status === LoaderStatus.kConnecting || this._status === LoaderStatus.kBuffering;\n    }\n  }, {\n    key: \"type\",\n    get: function get() {\n      return this._type;\n    }\n  }, {\n    key: \"status\",\n    get: function get() {\n      return this._status;\n    }\n  }, {\n    key: \"needStashBuffer\",\n    get: function get() {\n      return this._needStash;\n    }\n  }, {\n    key: \"onContentLengthKnown\",\n    get: function get() {\n      return this._onContentLengthKnown;\n    },\n    set: function set(callback) {\n      this._onContentLengthKnown = callback;\n    }\n  }, {\n    key: \"onURLRedirect\",\n    get: function get() {\n      return this._onURLRedirect;\n    },\n    set: function set(callback) {\n      this._onURLRedirect = callback;\n    }\n  }, {\n    key: \"onDataArrival\",\n    get: function get() {\n      return this._onDataArrival;\n    },\n    set: function set(callback) {\n      this._onDataArrival = callback;\n    }\n  }, {\n    key: \"onError\",\n    get: function get() {\n      return this._onError;\n    },\n    set: function set(callback) {\n      this._onError = callback;\n    }\n  }, {\n    key: \"onComplete\",\n    get: function get() {\n      return this._onComplete;\n    },\n    set: function set(callback) {\n      this._onComplete = callback;\n    } // pure virtual\n\n  }, {\n    key: \"open\",\n    value: function open(dataSource, range) {\n      throw new NotImplementedException('Unimplemented abstract function!');\n    }\n  }, {\n    key: \"abort\",\n    value: function abort() {\n      throw new NotImplementedException('Unimplemented abstract function!');\n    }\n  }]);\n\n  return BaseLoader;\n}();","map":{"version":3,"sources":["D:/STREAMING_SITE/client/node_modules/flv.js/src/io/loader.js"],"names":["NotImplementedException","LoaderStatus","kIdle","kConnecting","kBuffering","kError","kComplete","LoaderErrors","OK","EXCEPTION","HTTP_STATUS_CODE_INVALID","CONNECTING_TIMEOUT","EARLY_EOF","UNRECOVERABLE_EARLY_EOF","BaseLoader","typeName","_type","_status","_needStash","_onContentLengthKnown","_onURLRedirect","_onDataArrival","_onError","_onComplete","callback","dataSource","range"],"mappings":"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","sourcesContent":["/*\n * Copyright (C) 2016 Bilibili. All Rights Reserved.\n *\n * @author zheng qian <xqq@xqq.im>\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {NotImplementedException} from '../utils/exception.js';\n\nexport const LoaderStatus = {\n    kIdle: 0,\n    kConnecting: 1,\n    kBuffering: 2,\n    kError: 3,\n    kComplete: 4\n};\n\nexport const LoaderErrors = {\n    OK: 'OK',\n    EXCEPTION: 'Exception',\n    HTTP_STATUS_CODE_INVALID: 'HttpStatusCodeInvalid',\n    CONNECTING_TIMEOUT: 'ConnectingTimeout',\n    EARLY_EOF: 'EarlyEof',\n    UNRECOVERABLE_EARLY_EOF: 'UnrecoverableEarlyEof'\n};\n\n/* Loader has callbacks which have following prototypes:\n *     function onContentLengthKnown(contentLength: number): void\n *     function onURLRedirect(url: string): void\n *     function onDataArrival(chunk: ArrayBuffer, byteStart: number, receivedLength: number): void\n *     function onError(errorType: number, errorInfo: {code: number, msg: string}): void\n *     function onComplete(rangeFrom: number, rangeTo: number): void\n */\nexport class BaseLoader {\n\n    constructor(typeName) {\n        this._type = typeName || 'undefined';\n        this._status = LoaderStatus.kIdle;\n        this._needStash = false;\n        // callbacks\n        this._onContentLengthKnown = null;\n        this._onURLRedirect = null;\n        this._onDataArrival = null;\n        this._onError = null;\n        this._onComplete = null;\n    }\n\n    destroy() {\n        this._status = LoaderStatus.kIdle;\n        this._onContentLengthKnown = null;\n        this._onURLRedirect = null;\n        this._onDataArrival = null;\n        this._onError = null;\n        this._onComplete = null;\n    }\n\n    isWorking() {\n        return this._status === LoaderStatus.kConnecting || this._status === LoaderStatus.kBuffering;\n    }\n\n    get type() {\n        return this._type;\n    }\n\n    get status() {\n        return this._status;\n    }\n\n    get needStashBuffer() {\n        return this._needStash;\n    }\n\n    get onContentLengthKnown() {\n        return this._onContentLengthKnown;\n    }\n\n    set onContentLengthKnown(callback) {\n        this._onContentLengthKnown = callback;\n    }\n\n    get onURLRedirect() {\n        return this._onURLRedirect;\n    }\n\n    set onURLRedirect(callback) {\n        this._onURLRedirect = callback;\n    }\n\n    get onDataArrival() {\n        return this._onDataArrival;\n    }\n\n    set onDataArrival(callback) {\n        this._onDataArrival = callback;\n    }\n\n    get onError() {\n        return this._onError;\n    }\n\n    set onError(callback) {\n        this._onError = callback;\n    }\n\n    get onComplete() {\n        return this._onComplete;\n    }\n\n    set onComplete(callback) {\n        this._onComplete = callback;\n    }\n\n    // pure virtual\n    open(dataSource, range) {\n        throw new NotImplementedException('Unimplemented abstract function!');\n    }\n\n    abort() {\n        throw new NotImplementedException('Unimplemented abstract function!');\n    }\n\n\n}"]},"metadata":{},"sourceType":"module"}